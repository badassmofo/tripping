[forked from yohhoy/threads.h](https://gist.github.com/badassmofo/5897507)
