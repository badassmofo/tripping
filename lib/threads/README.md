[forked from yohhoy/threads.h](https://gist.github.com/takeiteasy/5897507)
